<nav id="menu" mmenu>

    <!--init from directive-->
    <!--<ul contentful-entries="'content_type=category'">-->
        <!--<li><a ui-sref="home">Home</a></li>-->
        <!--<li ng-repeat="category in $contentfulEntries.items | orderBy:'fields.weight'">-->
            <!--<a ui-sref="categories">{{ category.fields.name }}</a>-->
            <!--<ul>-->
                <!--<li ng-repeat="category in $contentfulEntries.items | orderBy:'fields.weight'">-->
                    <!--<a ui-sref="categories">{{ category.fields.name }}</a>-->
                <!--</li>-->
            <!--</ul>-->
        <!--</li>-->
    <!--</ul>-->

    <!--init from controller-->


    <ul id="mmenu-list">
        <li><a ui-sref="home">Home</a></li>
        <li ng-repeat="category in entries | orderBy:'fields.weight'" ng-if="category.sys.contentType.sys.id == 'category'">
            <a ui-sref="categories.catName({catName: category.fields.name})">{{ category.fields.name }}</a>
            <ul ng-if="category.fields.subcategories.length > 0">
                <li ng-repeat="subcat in category.fields.subcategories | orderBy:'fields.weight'">
                    <a ui-sref="categories">{{ subcat }}</a>

                    <ul ng-if="category.fields.depth === 3">
                        <li ng-repeat="entry in entries | orderBy:'fields.weight'" ng-if="entry.fields.subcategory === subcat ">
                            <a>{{ entry.fields.name }}</a>
                        </li>
                    </ul>

                </li>
            </ul>
        </li>
    </ul>

</nav>